!function(a){a.fn.duduAlbum=function(b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;b=a.extend({},a.fn.duduAlbum.defalutParam,b),duduAlbumTimer=null,c=a("body"),d=a(this),e=0,f=d.length,g=Math.ceil(f/b.showImgNum),h=1,i=71,j=31,k=71,m=b.height-b.smallImgFrameHeight,n=(m-i)/2,o=(b.smallImgFrameHeight-k)/2,p=10,q=.4*b.width,$overlay=a('<div id="ddd" class="dudu_album_shade"></div>'),$albumCloseButton=a('<a class="dudu_album_close_button" href="javascript:void(0);"></a>'),$albumFrame=a('<div class="dudu_album_frame"></div>'),$bigImgFrame=a('<div class="dudu_album_big_img_frame"></div>'),$bigImgLeftArrow=a('<div id="dudu_album_big_img_left_arrow" class="dudu_album_big_img_arrow">								<img src="image/dudu_album_big_img_l_a.png"/>							</div>'),$bigImgRightArrow=a('<div id="dudu_album_big_img_right_arrow" class="dudu_album_big_img_arrow">								<img src="image/dudu_album_big_img_r_a.png"/>							</div>'),$smallImgFrame=a('<div class="dudu_album_small_img_frame"></div>'),$smallImgLeftArrow=a('<div id="dudu_album_small_img_left_arrow" class="dudu_album_small_img_arrow">								<img src="image/dudu_album_small_img_l_a.png"/>							</div>'),$smallImgRightArrow=a('<div id="dudu_album_small_img_right_arrow" class="dudu_album_small_img_arrow">								<img src="image/dudu_album_small_img_r_a.png"/>							</div>'),$smallShowFrame=a('<div class="dudu_album_small_show_frame"></div>'),$smallListUl=a('<ul class="dudu_album_small_list_ul"></ul>'),$bigImgLeftArrow.width(q),$bigImgLeftArrow.appendTo($bigImgFrame),$bigImgRightArrow.width(q),$bigImgRightArrow.appendTo($bigImgFrame),$bigImgFrame.css({height:m}).appendTo($albumFrame),0!=b.smallImgFrameHeight&&($smallImgLeftArrow.appendTo($smallImgFrame),r=4,s=b.width-80-2*r,t=b.smallImgFrameHeight-2*r,$smallShowFrame.css({width:s,height:t,margin:r}).appendTo($smallImgFrame),u=$smallImgLeftArrow.children("img"),v=$smallImgRightArrow.children("img"),u.css({top:o}),v.css({top:o}),d.each(function(){a('<li><a href="javascript:void(0);"><img width="100%" height="100%" src="'+a(this).attr("href")+'"/></a></li>').appendTo($smallListUl)}),w=6,x=parseInt(s/b.showImgNum),y=x-2*w,z=t-2*w,A=$smallListUl.children("li"),A.css({width:y,height:z}),$smallListUl.css({height:t,width:x*f}).appendTo($smallShowFrame),$smallImgRightArrow.appendTo($smallImgFrame),$smallImgFrame.css({height:b.smallImgFrameHeight}).appendTo($albumFrame),A.hover(function(){a(this).addClass("dudu_album_small_list_li_hover")},function(){a(this).removeClass("dudu_album_small_list_li_hover")}),B=A.children("a"),B.click(function(a){F(3,B.index(this)),a.stopPropagation()}),$smallImgLeftArrow.click(function(a){1!=h&&(h--,$smallListUl.animate({marginLeft:-(h-1)*x*b.showImgNum},"fast")),a.stopPropagation()}),$smallImgRightArrow.click(function(a){h!=g&&(h++,$smallListUl.animate({marginLeft:-(h-1)*x*b.showImgNum},"fast")),a.stopPropagation()}),$smallImgFrame.click(function(a){a.stopPropagation()})),$albumFrame.css({width:b.width,height:b.height}).appendTo($overlay),$albumCloseButton.appendTo($overlay),$overlay.css({width:"100%"}).appendTo(c),C=$bigImgLeftArrow.children("img"),D=$bigImgRightArrow.children("img"),C.css({top:n,left:p}),D.css({top:n,left:q-p-j}),d.each(function(b){a('<a href="javascript:void(0);" index="'+b+'" class="dudu_big_img_a '+(b==e?"dudu_current_show":"")+'" ><img src="'+a(this).attr("href")+'"/></a>').appendTo($bigImgFrame)}),b.hideBigImgArrow?(c.delegate("#dudu_album_big_img_left_arrow",{mouseenter:function(){C.show()},mouseleave:function(){C.hide()}}),c.delegate("#dudu_album_big_img_right_arrow",{mouseenter:function(){D.show()},mouseleave:function(){D.hide()}})):a(".dudu_album_big_img_arrow").children("img").show(),c.delegate("#dudu_album_big_img_left_arrow img","click",function(a){F(1),a.stopPropagation()}),c.delegate("#dudu_album_big_img_right_arrow img","click",function(a){F(2),a.stopPropagation()}),c.delegate(".dudu_album_big_img_frame","click",function(a){a.stopPropagation()}),E=!0,F=null,F=function(a,c){E&&(E=!1,1===a?(e--,G(1)):2===a?(e++,G(1)):3===a&&0!=b.smallImgFrameHeight&&(e=c,G(1)))},G=null,G=function(c){var g,h,d=!!c&&b.autoPlay;d&&clearInterval(duduAlbumTimer),e==f?e=0:0>e&&(e=f-1),0!=b.smallImgFrameHeight&&K(),g=a(".dudu_big_img_a").eq(e),h=a(".dudu_current_show"),g.addClass("dudu_next_show"),h.fadeOut("slow",function(){h.removeClass("dudu_current_show").removeAttr("style"),g.removeClass("dudu_next_show").addClass("dudu_current_show"),d&&(duduAlbumTimer=setInterval(function(){e++,G()},b.playSpeed)),E=!0})},d.bind("click",function(){var d=a(this).index();return e=d,a(".dudu_album_big_img_frame a").removeClass("dudu_current_show").eq(e).addClass("dudu_current_show"),0!=b.smallImgFrameHeight&&K(),a("html").css({overflow:"visible"}),c.css({overflow:"hidden"}),$albumFrame.css({marginTop:H()}),$overlay.css({top:I(),height:a(window).height()}).show(),b.autoPlay&&(clearInterval(duduAlbumTimer),duduAlbumTimer=setInterval(function(){e++,G()},b.playSpeed)),!1}),H=null,H=function(){return(a(window).height()-b.height)/2},I=null,I=function(){var a;return"undefined"!=typeof window.pageYOffset?a=window.pageYOffset:"undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?a=document.documentElement.scrollTop:"undefined"!=typeof document.body&&(a=document.body.scrollTop),a},b.hideOnOverlayClick&&c.delegate(".dudu_album_shade","click",function(){J()}),a(".dudu_album_close_button").click(function(a){J(),a.stopPropagation()}),J=null,J=function(){0!=b.smallImgFrameHeight&&(h=1,$smallListUl.css({marginLeft:0})),c.css({overflow:"auto"}),a("html").css({overflow:"auto"}),$overlay.hide(),b.autoPlay&&clearInterval(duduAlbumTimer)},K=null,K=function(){A.removeClass("dudu_album_small_list_li_current").eq(e).addClass("dudu_album_small_list_li_current"),0==e?(h=1,$smallListUl.animate({marginLeft:0},"fast")):(h=L(e)>h?L(e):h,$smallListUl.animate({marginLeft:-(h-1)*x*b.showImgNum},"fast"))},L=null,L=function(a){return Math.ceil((a+1)/b.showImgNum)}},a.fn.duduAlbumReset=function(){clearInterval(duduAlbumTimer),$overlay.remove()},a.fn.duduAlbum.defalutParam={width:600,height:400,smallImgFrameHeight:100,hideOnOverlayClick:!1,autoPlay:!1,playSpeed:2e3,hideBigImgArrow:!0,showImgNum:5}}($);